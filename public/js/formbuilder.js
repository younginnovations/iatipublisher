"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[589],{66848:function(e,t,i){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicField=void 0;var d=l(i(74692));i(85458);var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,l;return t=e,(i=[{key:"hideShowFormFields",value:function(){this.humanitarianScopeHideVocabularyUri(),this.countryBudgetHideCodeField(),this.aidTypeVocabularyHideField(),this.sectorVocabularyHideField(),this.policyVocabularyHideField(),this.recipientVocabularyHideField(),this.sectorVocabularyHideField(),this.tagVocabularyHideField(),this.transactionAidTypeVocabularyHideField(),this.indicatorReferenceHideFieldUri()}},{key:"humanitarianScopeHideVocabularyUri",value:function(){var e=this,t=(0,d.default)('select[id^="humanitarian_scope"][id*="[vocabulary]"]');t.length>0&&(d.default.each(t,(function(t,i){var a,l=null!==(a=(0,d.default)(i).val())&&void 0!==a?a:"";e.hideHumanitarianScopeField((0,d.default)(i),l.toString())})),t.on("select2:select",(function(t){var i=t.params.data.id,a=t.target;e.hideHumanitarianScopeField((0,d.default)(a),i)})),t.on("select2:clear",(function(t){var i=t.target;e.hideHumanitarianScopeField((0,d.default)(i),"")})))}},{key:"hideHumanitarianScopeField",value:function(e,t){var i='input[id^="humanitarian_scope"][id*="[vocabulary_uri]"]';"99"===t?e.closest(".form-field-group").find(i).show().removeAttr("disabled").closest(".form-field").show():e.closest(".form-field-group").find(i).val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide()}},{key:"indicatorReferenceHideFieldUri",value:function(){var e=this,t=(0,d.default)('select[id^="reference"][id*="[vocabulary]"]');t.length>0&&(d.default.each(t,(function(t,i){var a,l=null!==(a=(0,d.default)(i).val())&&void 0!==a?a:"";e.indicatorReferenceHideField((0,d.default)(i),l.toString())})),t.on("select2:select",(function(t){var i=t.params.data.id,a=t.target;e.indicatorReferenceHideField((0,d.default)(a),i)})),t.on("select2:clear",(function(t){var i=t.target;e.indicatorReferenceHideField((0,d.default)(i),"")})))}},{key:"indicatorReferenceHideField",value:function(e,t){var i='input[id^="reference"][id*="[indicator_uri]"]';"99"===t?e.closest(".form-field-group").find(i).show().removeAttr("disabled").closest(".form-field").show():e.closest(".form-field-group").find(i).val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide()}},{key:"countryBudgetHideCodeField",value:function(){var e,t=this,i=(0,d.default)("select#country_budget_vocabulary");if(i.length>0){var a=null!==(e=i.val())&&void 0!==e?e:"1";this.hideCountryBudgetField(a.toString()),i.on("select2:select",(function(e){var i=e.params.data.id;t.hideCountryBudgetField(i)})),i.on("select2:clear",(function(){t.hideCountryBudgetField("")}))}}},{key:"hideCountryBudgetField",value:function(e){var t='input[id^="budget_item"][id*="[code_text]"]',i='select[id^="budget_item"][id*="[code]"]';"1"===e?((0,d.default)(i).val("").trigger("change").attr("disabled","disabled").closest(".form-field").hide(),(0,d.default)(t).removeAttr("disabled").closest(".form-field").show()):((0,d.default)(i).removeAttr("disabled").closest(".form-field").show(),(0,d.default)(t).val("").trigger("change").closest(".form-field").hide())}},{key:"aidTypeVocabularyHideField",value:function(){var e=this,t=(0,d.default)('select[id*="default_aid_type_vocabulary"]');t.length>0&&(d.default.each(t,(function(t,i){var a,l=null!==(a=(0,d.default)(i).val())&&void 0!==a?a:"1";e.hideAidTypeSelectField((0,d.default)(i),l.toString())})),t.on("select2:select",(function(t){var i=t.params.data.id,a=t.target;e.hideAidTypeSelectField((0,d.default)(a),i)})),t.on("select2:clear",(function(t){var i=t.target;e.hideAidTypeSelectField((0,d.default)(i),"")})))}},{key:"transactionAidTypeVocabularyHideField",value:function(){var e=this,t=(0,d.default)('select[id*="aid_type_vocabulary"]');t.length>0&&(d.default.each(t,(function(t,i){var a,l=null!==(a=(0,d.default)(i).val())&&void 0!==a?a:"1";e.hideTransactionAidTypeSelectField((0,d.default)(i),l.toString())})),t.on("select2:select",(function(t){var i=t.params.data.id,a=t.target;e.hideTransactionAidTypeSelectField((0,d.default)(a),i)})),t.on("select2:clear",(function(t){var i=t.target;e.hideTransactionAidTypeSelectField((0,d.default)(i),"")})))}},{key:"hideAidTypeSelectField",value:function(e,t){switch(t){case"2":e.closest(".form-field-group").find('select[id*="[earmarking_category]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('select[id*="[default_aid_type]"],select[id*="[earmarking_modality]"],select[id*="[cash_and_voucher_modalities]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;case"3":e.closest(".form-field-group").find('select[id*="[earmarking_modality]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('select[id*="[default_aid_type]"],select[id*="[earmarking_category]"],select[id*="[cash_and_voucher_modalities]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;case"4":e.closest(".form-field-group").find('select[id*="[cash_and_voucher_modalities]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('select[id*="[default_aid_type]"],select[id*="[earmarking_category]"],select[id*="[earmarking_modality]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;default:e.closest(".form-field-group").find('select[id*="[default_aid_type]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('select[id*="[earmarking_category]"],select[id*="[earmarking_modality]"],select[id*="[cash_and_voucher_modalities]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide()}}},{key:"hideTransactionAidTypeSelectField",value:function(e,t){switch(t){case"2":e.closest(".form-field-group").find('select[id*="[earmarking_category]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('select[id*="[aid_type_code]"],select[id*="[earmarking_modality]"],select[id*="[cash_and_voucher_modalities]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;case"3":e.closest(".form-field-group").find('select[id*="[earmarking_modality]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('select[id*="[aid_type_code]"],select[id*="[earmarking_category]"],select[id*="[cash_and_voucher_modalities]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;case"4":e.closest(".form-field-group").find('select[id*="[cash_and_voucher_modalities]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('select[id*="[aid_type_code]"],select[id*="[earmarking_category]"],select[id*="[earmarking_modality]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;default:e.closest(".form-field-group").find('select[id*="[aid_type_code]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('select[id*="[earmarking_category]"],select[id*="[earmarking_modality]"],select[id*="[cash_and_voucher_modalities]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide()}}},{key:"policyVocabularyHideField",value:function(){var e=this,t=(0,d.default)('select[id*="policy_marker_vocabulary"]');t.length>0&&(d.default.each(t,(function(t,i){var a,l=null!==(a=(0,d.default)(i).val())&&void 0!==a?a:"1";e.hidePolicyMakerField((0,d.default)(i),l.toString())})),t.on("select2:select",(function(t){var i=t.params.data.id,a=t.target;e.hidePolicyMakerField((0,d.default)(a),i)})),t.on("select2:clear",(function(t){var i=t.target;e.hidePolicyMakerField((0,d.default)(i),"99")})))}},{key:"hidePolicyMakerField",value:function(e,t){"1"===t?(e.closest(".form-field-group").find('select[id*="[policy_marker]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('input[id*="[policy_marker_text]"],input[id*="[vocabulary_uri]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide()):(e.closest(".form-field-group").find('input[id*="[policy_marker_text]"],input[id*="[vocabulary_uri]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('select[id*="[policy_marker]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide())}},{key:"sectorVocabularyHideField",value:function(){var e=this,t=(0,d.default)('select[id*="sector_vocabulary"]');t.length>0&&(d.default.each(t,(function(t,i){var a,l=null!==(a=(0,d.default)(i).val())&&void 0!==a?a:"1";e.hideSectorField((0,d.default)(i),l.toString())})),t.on("select2:select",(function(t){var i=t.params.data.id,a=t.target;e.hideSectorField((0,d.default)(a),i)})),t.on("select2:clear",(function(t){var i=t.target;e.hideSectorField((0,d.default)(i),"")})))}},{key:"hideSectorField",value:function(e,t){var i='input[id*="[text]"],input[id*="[vocabulary_uri]"]',a='select[id*="[category_code]"],select[id*="[sdg_goal]"],select[id*="[sdg_target]"],select[id*="[code]"]';switch(t){case"1":e.closest(".form-field-group").find('select[id*="[code]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('select[id*="[category_code]"],select[id*="[sdg_goal]"],select[id*="[sdg_target]"],input[id*="[vocabulary_uri]"],input[id*="[text]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;case"2":e.closest(".form-field-group").find('select[id*="[category_code]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('input[id*="[vocabulary_uri]"],select[id*="[sdg_goal]"],select[id*="[sdg_target]"],select[id*="[code]"],input[id*="[text]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;case"7":e.closest(".form-field-group").find('select[id*="[sdg_goal]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('input[id*="[vocabulary_uri]"],select[id*="[category_code]"],select[id*="[sdg_target]"],select[id*="[code]"],input[id*="[text]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;case"8":e.closest(".form-field-group").find('select[id*="[sdg_target]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('input[id*="[vocabulary_uri]"],select[id*="[category_code]"],select[id*="[sdg_goal]"],select[id*="[code]"],input[id*="[text]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;case"98":case"99":e.closest(".form-field-group").find(i).show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find(a).val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;default:e.closest(".form-field-group").find('input[id*="[text]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('select[id*="[category_code]"],select[id*="[sdg_goal]"],select[id*="[sdg_target]"],select[id*="[code]"],input[id*="[vocabulary_uri]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide()}}},{key:"recipientVocabularyHideField",value:function(){var e=this,t=(0,d.default)('select[id*="region_vocabulary"]');t.length>0&&(d.default.each(t,(function(t,i){var a,l=null!==(a=(0,d.default)(i).val())&&void 0!==a?a:"1";e.hideRecipientRegionField((0,d.default)(i),l.toString())})),t.on("select2:select",(function(t){var i=t.params.data.id,a=t.target;e.hideRecipientRegionField((0,d.default)(a),i)})),t.on("select2:clear",(function(t){var i=t.target;e.hideRecipientRegionField((0,d.default)(i),"")})))}},{key:"hideRecipientRegionField",value:function(e,t){var i='input[id*="[custom_code]"], input[id*="[code]"]',a='select[id*="[region_code]"],input[id*="[vocabulary_uri]"]';switch(t){case"1":e.closest(".form-field-group").find('select[id*="[region_code]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('input[id*="[custom_code]"],input[id*="[vocabulary_uri]"],input[id*="[code]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;case"2":default:e.closest(".form-field-group").find(i).show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find(a).val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;case"99":e.closest(".form-field-group").find('input[id*="[custom_code]"],input[id*="[vocabulary_uri]"], input[id*="[code]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('select[id*="[region_code]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide()}}},{key:"updateActivityIdentifier",value:function(){var e=(0,d.default)("#activity_identifier");e.length>0&&e.on("keyup",(function(){(0,d.default)("#iati_identifier_text").val((0,d.default)(".identifier").attr("activity_identifier")+"-".concat((0,d.default)(this).val()))}))}},{key:"tagVocabularyHideField",value:function(){var e=this,t=(0,d.default)('select[id*="tag_vocabulary"]');t.length>0&&(d.default.each(t,(function(t,i){var a,l=null!==(a=(0,d.default)(i).val())&&void 0!==a?a:"1";e.hideTagField((0,d.default)(i),l.toString())})),t.on("select2:select",(function(t){var i=t.params.data.id,a=t.target;e.hideTagField((0,d.default)(a),i)})),t.on("select2:clear",(function(t){var i=t.target;e.hideTagField((0,d.default)(i),"")})))}},{key:"hideTagField",value:function(e,t){var i='input[id*="[tag_text]"]',a='select[id*="[goals_tag_code]"],select[id*="[targets_tag_code]"],input[id*="[vocabulary_uri]"]';switch(t){case"1":default:e.closest(".form-field-group").find(i).show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find(a).val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;case"2":e.closest(".form-field-group").find('select[id*="[goals_tag_code]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('input[id*="[vocabulary_uri]"],select[id*="[targets_tag_code]"],select[id*="[targets_tag_code]"],input[id*="[tag_text]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;case"3":e.closest(".form-field-group").find('select[id*="[targets_tag_code]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('input[id*="[vocabulary_uri]"],select[id*="[goals_tag_code]"],input[id*="[tag_text]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide();break;case"99":e.closest(".form-field-group").find('input[id*="[tag_text]"], input[id*="[vocabulary_uri]"]').show().removeAttr("disabled").closest(".form-field").show(),e.closest(".form-field-group").find('select[id*="[goals_tag_code]"],select[id*="[targets_tag_code]"]').val("").trigger("change").hide().attr("disabled","disabled").closest(".form-field").hide()}}}])&&a(t.prototype,i),l&&a(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e){e.css({"pointer-events":"none",opacity:"0",visibility:"invisible"}),setTimeout((function(){e.removeAttr("style")}),1e3)}t.DynamicField=r,(0,d.default)(document).on("click",(function(e){(0,d.default)(e.target).closest(".help").length||(0,d.default)(".help__text").removeAttr("style")})),(0,d.default)(document).on("click",".help",(function(e){e.stopPropagation(),(0,d.default)(".help__text").removeAttr("style");var t=(0,d.default)(this).find(".help__text");t.length>0&&t.css({opacity:"1",visibility:"visible"}),(0,d.default)(e.target).closest(".close-help").length&&o(t)})),(0,d.default)(document).on("keydown",(function(e){"Escape"===e.key&&(0,d.default)(".help__text").each((function(){o((0,d.default)(this))}))}))},4642:function(e,t,i){function a(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=d(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0,l=function(){};return{s:l,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,n=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){n=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(n)throw r}}}}function d(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function o(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=n(i(86425)),s=n(i(74692));i(85458);var f=new(i(66848).DynamicField),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,a;return t=e,(i=[{key:"addForm",value:function(e){e.preventDefault();var t=e.target,i=(0,s.default)(t).attr("form_type")?(0,s.default)(".collection-container[form_type ='".concat((0,s.default)(t).attr("form_type"),"']")):(0,s.default)(".collection-container"),a=(0,s.default)(t).attr("child_count")?parseInt((0,s.default)(t).attr("child_count"))+1:(0,s.default)(t).parent().find(".form-child-body").length,l=(0,s.default)(t).attr("parent_count")?parseInt((0,s.default)(t).attr("parent_count")):(0,s.default)(t).parents(".multi-form").index()-1,d=(0,s.default)(t).attr("wrapped_parent_count")?parseInt((0,s.default)(t).attr("wrapped_parent_count")):(0,s.default)(t).parents(".wrapped-child-body").index()-1,r=i.data("prototype").replace(/__PARENT_NAME__/g,l);r=(0,s.default)(t).attr("has_child_collection")?(r=r.replace(/__WRAPPER_NAME__/g,a)).replace(/__NAME__/g,0):(r=r.replace(/__NAME__/g,a)).replace(/__WRAPPER_NAME__/g,d),(0,s.default)(t).prev().append((0,s.default)(r)),(0,s.default)(t).attr("has_child_collection")&&((0,s.default)(t).prev(".subelement").children(".wrapped-child-body").last().find(".add_to_collection").attr("wrapped_parent_count",a),(0,s.default)(t).prev(".subelement").children(".wrapped-child-body").last().find(".add_to_collection").attr("parent_count",l)),(0,s.default)(t).prev().find(".wrapped-child-body").last().find(".add_to_collection").attr("wrapper_parent_count",null!=d?d:0),(0,s.default)(t).attr("form_type")?((0,s.default)(t).prev().last().find(".select2").select2({placeholder:"Select an option",allowClear:!0}),(0,s.default)(this).find(".sub-attribute").wrapAll((0,s.default)('<div class="form-field-group flex flex-wrap sub-attribute-wrapper"></div>')),(0,s.default)(t).prev(".subelement").children(".wrapped-child-body").last().find(".sub-attribute").wrapAll((0,s.default)('<div class="form-field-group flex flex-wrap sub-attribute-wrapper mt-6"></div>'))):(0,s.default)(t).parent().find(".form-child-body").last().find(".select2").select2({placeholder:"Select an option",allowClear:!0}),(0,s.default)(t).attr("child_count",a),f.aidTypeVocabularyHideField(),f.sectorVocabularyHideField()}},{key:"addParentForm",value:function(e){e.preventDefault();var t=e.target,i=(0,s.default)(t).attr("form_type")?(0,s.default)(".parent-collection[form_type ='".concat((0,s.default)(t).attr("form_type"),"']")):(0,s.default)(".parent-collection"),a=(0,s.default)(t).attr("parent_count")?parseInt((0,s.default)(t).attr("parent_count"))+1:((0,s.default)(t).prev().find(".multi-form").length?(0,s.default)(t).prev().find(".multi-form").length:(0,s.default)(t).prev().find(".wrapped-child-body").length)+1,l=i.data("prototype").replace(/__PARENT_NAME__/g,a);l=l.replace(/__NAME__/g,0),(0,s.default)(t).prev().append((0,s.default)(l)),(0,s.default)(t).prev().find(".multi-form").last().find(".select2").select2({placeholder:"Select an option",allowClear:!0}),(0,s.default)(t).prev().find(".multi-form").last().find(".add_to_collection").attr("parent_count",a),this.addWrapperOnAdd(t),(0,s.default)(t).attr("parent_count",a),f.humanitarianScopeHideVocabularyUri(),f.countryBudgetHideCodeField(),f.sectorVocabularyHideField(),f.recipientVocabularyHideField(),f.policyVocabularyHideField(),f.tagVocabularyHideField(),f.transactionAidTypeVocabularyHideField(),f.indicatorReferenceHideFieldUri()}},{key:"deleteForm",value:function(e){e.preventDefault();var t=e.target,i=(0,s.default)(".multi-form").length?(0,s.default)(t).closest(".subelement").find(".form-child-body").length:(0,s.default)(".form-child-body").length,a=(0,s.default)(".add_to_collection").attr("child_count")?parseInt((0,s.default)(".add_to_collection").attr("child_count"))+1:i;if((0,s.default)(".add_to_collection").attr("child_count",a),i>1){var l=(0,s.default)(t).closest(".form-child-body");l.next(".error").remove(),l.remove()}}},{key:"deleteParentForm",value:function(e){e.preventDefault();var t=e.target,i=(0,s.default)(".subelement").length,a=(0,s.default)(".add_to_parent").attr("child_count")?parseInt((0,s.default)(".add_to_parent").attr("child_count"))+1:i;(0,s.default)(".add_to_parent").attr("child_count",a),(0,s.default)(".add_to_parent").attr("parent_count",a),i>2&&(0,s.default)(t).parent().remove()}},{key:"addWrapper",value:function(){(0,s.default)(".multi-form").each((function(){(0,s.default)(this).find(".attribute").wrapAll((0,s.default)('<div class="form-field-group flex flex-wrap attribute-wrapper mb-4"></div>'))})),(0,s.default)(".subelement").find(".wrapped-child-body").each((function(){(0,s.default)(this).find(".sub-attribute").wrapAll((0,s.default)('<div class="form-field-group flex flex-wrap sub-attribute-wrapper mb-4"></div>'))}));var e=(0,s.default)("form>.form-field");e.length>0&&e.wrapAll('<div class="form-field-group-outer grid xl:grid-cols-2 mb-6 -mx-3 gap-y-6"></div>')}},{key:"addWrapperOnAdd",value:function(e){(0,s.default)(e).prev().find(".multi-form").last().find(".attribute").wrapAll((0,s.default)('<div class="form-field-group grid xl:grid-cols-2 attribute-wrapper mb-4"></div>')),(0,s.default)(e).prev().find(".multi-form").last().find(".subelement").find(".wrapped-child-body").each((function(){(0,s.default)(this).find(".sub-attribute").wrapAll((0,s.default)('<div class="form-field-group flex flex-wrap sub-attribute-wrapper mb-4"></div>'))}))}},{key:"textAreaHeight",value:function(e){var t=e.target,i=t.scrollHeight;(0,s.default)(t).css("height",i)}},{key:"addToCollection",value:function(){var e=this;(0,s.default)("body").on("click",".add_to_collection",(function(t){(0,s.default)(t.target).hasClass("add-icon")?(t.stopPropagation(),(0,s.default)(t.target).parent("button").trigger("click")):(e.addForm(t),e.handleDeleteParentButtons())})),(0,s.default)(".add_to_parent").on("click",(function(t){(0,s.default)(t.target).hasClass("add-icon")?(t.stopPropagation(),(0,s.default)(t.target).parent("button").trigger("click")):(e.addParentForm(t),e.handleDeleteParentButtons())}))}},{key:"deleteCollection",value:function(){var e=this,t=(0,s.default)(".delete-confirmation"),i={},a="";(0,s.default)("body").on("click",".delete",(function(e){t.fadeIn(),i=e,a="child"})),(0,s.default)("body").on("click",".cancel-popup",(function(){t.fadeOut(),i={},a=""})),(0,s.default)("body").on("click",".delete-confirm",(function(){"child"===a?e.deleteForm(i):"parent"===a&&e.deleteParentForm(i),t.fadeOut(),i={},a=""})),(0,s.default)("body").on("mouseenter",".delete-parent",(function(e){(0,s.default)(e.target).closest(".multi-form, .wrapped-child-body").css({background:"#FFF8F7",outline:"2px solid #F19BA0"})})),(0,s.default)("body").on("mouseleave",".delete-parent",(function(e){(0,s.default)(e.target).closest(".multi-form, .wrapped-child-body").css({background:"",outline:""})})),(0,s.default)("body").on("click",".delete-parent",(function(e){t.fadeIn(),i=e,a="parent"})),(0,s.default)(".select2").select2({placeholder:"Select an option",allowClear:!0}),(0,s.default)("body").on("change",'input[id*="[url]"]',(function(){var e,t=this,i=(null!==(e=(0,s.default)(this).val())&&void 0!==e?e:"").toString(),a=(0,s.default)(this).closest(".form-field-group").find('input[id*="[document]"]').val(),l="/mimetype?url=".concat(i,"&type=url");(0,s.default)(this).closest(".form-field").find(".text-danger").remove(),""!==i?c.default.get(l).then((function(e){if(e.data.success){var i=e.data.data.mimetype;(0,s.default)(t).closest(".form-field-group").find('select[id*="[format]"]').val(i).trigger("change")}else(0,s.default)(t).closest(".form-field").find(".text-danger").remove(),(0,s.default)(t).closest(".form-field").append("<div class='text-danger error'>"+e.data.message+"</div>"),(0,s.default)(t).closest(".form-field-group").find('select[id*="[format]"]').val("").trigger("change");(0,s.default)(t).closest(".form-field-group").find('input[id*="[document]"]').val("").trigger("change")})):a&&""!==a||(0,s.default)(this).closest(".form-field-group").find('select[id*="[format]"]').val("").trigger("change")})),(0,s.default)("body").on("change",'input[id*="[document]"]',(function(){var e,t=this,i=(null!==(e=(0,s.default)(this).val())&&void 0!==e?e:"").toString(),a="/mimetype?url=".concat(i,"&&type=document"),l=(0,s.default)(this).closest(".form-field-group").find('input[id*="[url]"]').val();(0,s.default)(this).closest(".form-field").find(".text-danger").remove(),""!==i?(c.default.get(a).then((function(e){if(e.data.success){var i=e.data.data.mimetype;(0,s.default)(t).closest(".form-field-group").find('select[id*="[format]"]').val(i).trigger("change")}else(0,s.default)(t).closest(".form-field-group").find('select[id*="[format]"]').val("").trigger("change")})),(0,s.default)(this).closest(".form-field-group").find('input[id*="[url]"]').val("").trigger("change")):l&&""!==l||(0,s.default)(this).closest(".form-field-group").find('select[id*="[format]"]').val("").trigger("change")}))}},{key:"handleDeleteParentButtons",value:function(){var e=document.querySelectorAll(".delete-parent-selector");e.forEach((function(e){!function(e){var t=g(e.textContent);e.innerHTML='\n         <svg class="text-[1rem] mb-0.5" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n           <path d="M6.66667 12C6.84348 12 7.01305 11.9298 7.13807 11.8047C7.2631 11.6797 7.33333 11.5101 7.33333 11.3333V7.33334C7.33333 7.15653 7.2631 6.98696 7.13807 6.86193C7.01305 6.73691 6.84348 6.66667 6.66667 6.66667C6.48986 6.66667 6.32029 6.73691 6.19526 6.86193C6.07024 6.98696 6 7.15653 6 7.33334V11.3333C6 11.5101 6.07024 11.6797 6.19526 11.8047C6.32029 11.9298 6.48986 12 6.66667 12ZM13.3333 4H10.6667V3.33334C10.6667 2.8029 10.456 2.2942 10.0809 1.91912C9.70581 1.54405 9.1971 1.33334 8.66667 1.33334H7.33333C6.8029 1.33334 6.29419 1.54405 5.91912 1.91912C5.54405 2.2942 5.33333 2.8029 5.33333 3.33334V4H2.66667C2.48986 4 2.32029 4.07024 2.19526 4.19526C2.07024 4.32029 2 4.48986 2 4.66667C2 4.84348 2.07024 5.01305 2.19526 5.13807C2.32029 5.2631 2.48986 5.33334 2.66667 5.33334H3.33333V12.6667C3.33333 13.1971 3.54405 13.7058 3.91912 14.0809C4.29419 14.456 4.8029 14.6667 5.33333 14.6667H10.6667C11.1971 14.6667 11.7058 14.456 12.0809 14.0809C12.456 13.7058 12.6667 13.1971 12.6667 12.6667V5.33334H13.3333C13.5101 5.33334 13.6797 5.2631 13.8047 5.13807C13.9298 5.01305 14 4.84348 14 4.66667C14 4.48986 13.9298 4.32029 13.8047 4.19526C13.6797 4.07024 13.5101 4 13.3333 4ZM6.66667 3.33334C6.66667 3.15652 6.7369 2.98696 6.86193 2.86193C6.98695 2.73691 7.15652 2.66667 7.33333 2.66667H8.66667C8.84348 2.66667 9.01305 2.73691 9.13807 2.86193C9.2631 2.98696 9.33333 3.15652 9.33333 3.33334V4H6.66667V3.33334ZM11.3333 12.6667C11.3333 12.8435 11.2631 13.0131 11.1381 13.1381C11.013 13.2631 10.8435 13.3333 10.6667 13.3333H5.33333C5.15652 13.3333 4.98695 13.2631 4.86193 13.1381C4.7369 13.0131 4.66667 12.8435 4.66667 12.6667V5.33334H11.3333V12.6667ZM9.33333 12C9.51014 12 9.67971 11.9298 9.80474 11.8047C9.92976 11.6797 10 11.5101 10 11.3333V7.33334C10 7.15653 9.92976 6.98696 9.80474 6.86193C9.67971 6.73691 9.51014 6.66667 9.33333 6.66667C9.15652 6.66667 8.98695 6.73691 8.86193 6.86193C8.73691 6.98696 8.66667 7.15653 8.66667 7.33334V11.3333C8.66667 11.5101 8.73691 11.6797 8.86193 11.8047C8.98695 11.9298 9.15652 12 9.33333 12Z" fill="#E34D5B"/>\n         </svg>\n         '.concat(t,"\n      ")}(e)}))}}])&&o(t.prototype,i),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function h(e){e.css({"pointer-events":"none",opacity:"0",visibility:"invisible"}),setTimeout((function(){e.removeAttr("style")}),1e3)}(0,s.default)((function(){var e=new u;function t(e){var t=e.val()?"/organisation/agency/"+e.val():"/organisation/agency/";s.default.ajax({url:t}).then((function(e){var t,i=null!==(t=(0,s.default)("#organization_registration_agency").val())&&void 0!==t?t:"",a=!1;for(var l in(0,s.default)("#organization_registration_agency").empty(),e.data)l===i&&(a=!0),(0,s.default)("#organization_registration_agency").append(new Option(e.data[l],l,!0,!0)).val("").trigger("change");(0,s.default)("#organization_registration_agency").val(a?i:"").trigger("change")}))}e.addWrapper(),f.hideShowFormFields(),f.updateActivityIdentifier(),e.addToCollection(),e.deleteCollection(),(0,s.default)("textarea.form__input").length>0&&(0,s.default)("body").on("input","textarea.form__input",(function(t){e.textAreaHeight(t)})),(0,s.default)("body").on("select2:open",".select2",(function(){var e=document.querySelector(".select2-search__field");e&&e.focus()})),t((0,s.default)("#organization_country")),(0,s.default)("#organisation_identifier").attr("disabled","disabled"),(0,s.default)("body").on("select2:select","#organization_country",(function(){t((0,s.default)(this))})),(0,s.default)("body").on("select2:clear","#organization_country",(function(){t((0,s.default)(this))})),(0,s.default)("body").on("select2:select","#organization_registration_agency",(function(){var e=(0,s.default)(this).val()+"-"+(0,s.default)("#registration_number").val();(0,s.default)("#organisation_identifier").val(e)})),(0,s.default)("body").on("select2:clear","#organization_registration_agency",(function(){var e="-"+(0,s.default)("#registration_number").val();(0,s.default)("#organisation_identifier").val(e)})),(0,s.default)("body").on("keyup","#registration_number",(function(){var e=(0,s.default)("#organization_registration_agency").val()+"-"+(0,s.default)(this).val();(0,s.default)("#organisation_identifier").val(e)}));for(var i=document.querySelectorAll(".subelement"),d=0;d<i.length;d++){var r=i[d].querySelector(".control-label"),o=i[d].querySelector(".collection_error"),n=null==o?void 0:o.childElementCount;n&&n>0&&(null==r||r.classList.add("error-title"))}for(var c=document.querySelectorAll("select.cursor-not-allowed"),h=0;h<c.length;h++){var p=c[h].nextSibling,m=null==p?void 0:p.firstChild,v=null==m?void 0:m.firstChild;v&&(v.style.cursor="not-allowed")}function _(e){var t=g(e.textContent);e.innerHTML='\n      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M6.66667 12C6.84348 12 7.01305 11.9298 7.13807 11.8047C7.2631 11.6797 7.33333 11.5101 7.33333 11.3333V7.33334C7.33333 7.15653 7.2631 6.98696 7.13807 6.86193C7.01305 6.73691 6.84348 6.66667 6.66667 6.66667C6.48986 6.66667 6.32029 6.73691 6.19526 6.86193C6.07024 6.98696 6 7.15653 6 7.33334V11.3333C6 11.5101 6.07024 11.6797 6.19526 11.8047C6.32029 11.9298 6.48986 12 6.66667 12ZM13.3333 4H10.6667V3.33334C10.6667 2.8029 10.456 2.2942 10.0809 1.91912C9.70581 1.54405 9.1971 1.33334 8.66667 1.33334H7.33333C6.8029 1.33334 6.29419 1.54405 5.91912 1.91912C5.54405 2.2942 5.33333 2.8029 5.33333 3.33334V4H2.66667C2.48986 4 2.32029 4.07024 2.19526 4.19526C2.07024 4.32029 2 4.48986 2 4.66667C2 4.84348 2.07024 5.01305 2.19526 5.13807C2.32029 5.2631 2.48986 5.33334 2.66667 5.33334H3.33333V12.6667C3.33333 13.1971 3.54405 13.7058 3.91912 14.0809C4.29419 14.456 4.8029 14.6667 5.33333 14.6667H10.6667C11.1971 14.6667 11.7058 14.456 12.0809 14.0809C12.456 13.7058 12.6667 13.1971 12.6667 12.6667V5.33334H13.3333C13.5101 5.33334 13.6797 5.2631 13.8047 5.13807C13.9298 5.01305 14 4.84348 14 4.66667C14 4.48986 13.9298 4.32029 13.8047 4.19526C13.6797 4.07024 13.5101 4 13.3333 4ZM6.66667 3.33334C6.66667 3.15652 6.7369 2.98696 6.86193 2.86193C6.98695 2.73691 7.15652 2.66667 7.33333 2.66667H8.66667C8.84348 2.66667 9.01305 2.73691 9.13807 2.86193C9.2631 2.98696 9.33333 3.15652 9.33333 3.33334V4H6.66667V3.33334ZM11.3333 12.6667C11.3333 12.8435 11.2631 13.0131 11.1381 13.1381C11.013 13.2631 10.8435 13.3333 10.6667 13.3333H5.33333C5.15652 13.3333 4.98695 13.2631 4.86193 13.1381C4.7369 13.0131 4.66667 12.8435 4.66667 12.6667V5.33334H11.3333V12.6667ZM9.33333 12C9.51014 12 9.67971 11.9298 9.80474 11.8047C9.92976 11.6797 10 11.5101 10 11.3333V7.33334C10 7.15653 9.92976 6.98696 9.80474 6.86193C9.67971 6.73691 9.51014 6.66667 9.33333 6.66667C9.15652 6.66667 8.98695 6.73691 8.86193 6.86193C8.73691 6.98696 8.66667 7.15653 8.66667 7.33334V11.3333C8.66667 11.5101 8.73691 11.6797 8.86193 11.8047C8.98695 11.9298 9.15652 12 9.33333 12Z" fill="#E34D5B"/>\n      </svg>\n      '.concat(t)}function y(e){var t=function(e){return e.closest("label")}(e),i=t?function(e){return e.querySelector(".optional-text")}(t):null,d=t?function(e){return e.closest(".subelement.rounded-t-sm")}(t):null,r=null!==i;e.addEventListener("click",(function(){i&&function(e){var t='<svg viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 9a1.87 1.87 0 1 0 3.74 0A1.87 1.87 0 0 0 6 9Z" fill="#68797E"></path></svg><span>Optional</span>',i="<span>( Optional )</span>",a=null!==e.querySelector("svg");e.innerHTML=a?i:t}(i),d&&function(e){function t(e){var t=e.nextElementSibling;return!(!t||"BUTTON"!==t.tagName)&&(t.classList.contains("add_more")&&t.classList.contains("button"))}var i=a(e.children).filter((function(e){return"LABEL"!==e.tagName})),l=null,d=t(e);d&&(l=e.nextElementSibling)&&l.classList.toggle("display-none");i.forEach((function(t){d&&l&&e.classList.toggle("mb-6"),t.classList.contains("height-hide")?(t.classList.remove("height-hide"),t.classList.add("height-show")):(t.classList.remove("height-show"),t.classList.add("height-hide"))}))}(d),e.classList.toggle("rotate-180")})),r&&!function(e){var t,i=e.querySelectorAll(".error"),a=e.querySelectorAll(".text-danger-error"),d=l(i);try{for(d.s();!(t=d.n()).done;){if(""!==t.value.textContent.trim())return!0}}catch(e){d.e(e)}finally{d.f()}var r,o=l(a);try{for(o.s();!(r=o.n()).done;){if(""!==r.value.textContent.trim())return!0}}catch(e){o.e(e)}finally{o.f()}return!1}(d)&&e.click()}document.querySelectorAll(".delete-parent-selector").forEach((function(e){return _(e)})),new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.length>0&&e.addedNodes.forEach((function(e){e instanceof Element&&(e.matches(".delete-item-selector")?_(e):e.querySelectorAll(".delete-item-selector").forEach((function(e){return _(e)})))}))}))})).observe(document.body,{childList:!0,subtree:!0}),document.querySelectorAll(".collapsable-button").forEach((function(e){return y(e)})),new MutationObserver((function(e){e.forEach((function(e){"childList"===e.type&&e.addedNodes.forEach((function(e){e instanceof HTMLElement&&e.querySelectorAll(".collapsable-button").forEach((function(e){return y(e)}))}))}))})).observe(document.body,{childList:!0,subtree:!0})})),(0,s.default)(document).on("click",(function(e){(0,s.default)(e.target).closest(".help").length||(0,s.default)(".help__text").removeAttr("style")})),(0,s.default)(document).on("click",".help",(function(e){e.stopPropagation(),(0,s.default)(".help__text").removeAttr("style");var t=(0,s.default)(this).find(".help__text");t.length>0&&t.css({opacity:"1",visibility:"visible"}),(0,s.default)(e.target).closest(".close-help").length&&h(t)})),(0,s.default)(document).on("keydown",(function(e){"Escape"===e.key&&(0,s.default)(".help__text").each((function(){h((0,s.default)(this))}))}))}},e=>{e.O(0,[660],(()=>{return t=4642,e(e.s=t);var t}));e.O()}]);